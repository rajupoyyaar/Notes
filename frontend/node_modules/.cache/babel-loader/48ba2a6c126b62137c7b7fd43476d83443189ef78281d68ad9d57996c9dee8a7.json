{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_URL = \"http://localhost:5001\";\nconsole.log(\"api url\", API_URL);\n\n// Async Thunks\nexport const loginUser = createAsyncThunk('user/login', async ({\n  email,\n  password\n}, thunkAPI) => {\n  try {\n    const config = {\n      headers: {\n        'Content-type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${API_URL}/login`, {\n      email,\n      password\n    }, config);\n    console.log(data);\n    localStorage.setItem('userInfo', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data.message);\n  }\n});\nexport const registerUser = createAsyncThunk('user/register', async ({\n  name,\n  email,\n  password,\n  profile\n}, thunkAPI) => {\n  try {\n    const config = {\n      headers: {\n        'Content-type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${API_URL}`, {\n      name,\n      email,\n      password,\n      profile\n    }, config);\n    localStorage.setItem('userInfo', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data.message);\n  }\n});\nexport const updateProfile = createAsyncThunk('user/updateProfile', async ({\n  name,\n  email,\n  password,\n  profile\n}, thunkAPI) => {\n  try {\n    const token = thunkAPI.getState().user.userInfo.token;\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${API_URL}`, {\n      name,\n      email,\n      password,\n      profile\n    }, config);\n    localStorage.setItem('userInfo', JSON.stringify(data)); // Update local storage\n    console.log(data);\n    return data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return thunkAPI.rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Profile update failed');\n  }\n});\n\n// User Slice\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    userInfo: null,\n    loading: false,\n    error: null\n  },\n  reducers: {\n    logoutUser: state => {\n      state.userInfo = null;\n      localStorage.removeItem('userInfo');\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Login\n    .addCase(loginUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(loginUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userInfo = action.payload;\n    }).addCase(loginUser.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    // Register\n    .addCase(registerUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(registerUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userInfo = action.payload;\n    }).addCase(registerUser.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n    //update Profile\n    .addCase(updateProfile.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(updateProfile.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userInfo = action.payload;\n    }).addCase(updateProfile.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logoutUser\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API_URL","console","log","loginUser","email","password","thunkAPI","config","headers","data","post","localStorage","setItem","JSON","stringify","error","rejectWithValue","response","message","registerUser","name","profile","updateProfile","token","getState","user","userInfo","Authorization","_error$response","_error$response$data","userSlice","initialState","loading","reducers","logoutUser","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/Users/rajupoyyaar/Documents/NotesApp/frontend/src/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_URL = \"http://localhost:5001\"\n\nconsole.log(\"api url\", API_URL)\n\n// Async Thunks\nexport const loginUser = createAsyncThunk(\n    'user/login',\n    async ({ email, password }, thunkAPI) => {\n        try {\n            const config = {\n                headers: {\n                    'Content-type': 'application/json',\n                },\n            };\n            const { data } = await axios.post(`${API_URL}/login`, { email, password }, config);\n            console.log(data)\n            localStorage.setItem('userInfo', JSON.stringify(data));\n            return data;\n        } catch (error) {\n            return thunkAPI.rejectWithValue(error.response.data.message);\n        }\n    }\n);\n\nexport const registerUser = createAsyncThunk(\n    'user/register',\n    async ({ name, email, password, profile }, thunkAPI) => {\n        try {\n            const config = {\n                headers: {\n                    'Content-type': 'application/json',\n                },\n            };\n            const { data } = await axios.post(`${API_URL}`, { name, email, password, profile }, config);\n            localStorage.setItem('userInfo', JSON.stringify(data));\n            return data;\n        } catch (error) {\n            return thunkAPI.rejectWithValue(error.response.data.message);\n        }\n    }\n);\n\nexport const updateProfile = createAsyncThunk(\n    'user/updateProfile',\n    async ({ name, email, password, profile }, thunkAPI) => {\n        try {\n            const token = thunkAPI.getState().user.userInfo.token;\n            const config = {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            };\n            const { data } = await axios.post(\n                `${API_URL}`,\n                { name, email, password, profile },\n                config\n            );\n            localStorage.setItem('userInfo', JSON.stringify(data)); // Update local storage\n            console.log(data)\n            return data;\n        } catch (error) {\n            return thunkAPI.rejectWithValue(\n                error.response?.data?.message || 'Profile update failed'\n            );\n        }\n    }\n);\n\n\n// User Slice\nconst userSlice = createSlice({\n    name: 'user',\n    initialState: {\n        userInfo: null,\n        loading: false,\n        error: null,\n    },\n    reducers: {\n        logoutUser: (state) => {\n            state.userInfo = null;\n            localStorage.removeItem('userInfo');\n        },\n    },\n    extraReducers: (builder) => {\n        builder\n            // Login\n            .addCase(loginUser.pending, (state) => {\n                state.loading = true;\n                state.error = null;\n            })\n            .addCase(loginUser.fulfilled, (state, action) => {\n                state.loading = false;\n                state.userInfo = action.payload;\n            })\n            .addCase(loginUser.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload;\n            })\n            // Register\n            .addCase(registerUser.pending, (state) => {\n                state.loading = true;\n                state.error = null;\n            })\n            .addCase(registerUser.fulfilled, (state, action) => {\n                state.loading = false;\n                state.userInfo = action.payload;\n            })\n            .addCase(registerUser.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload;\n            })\n            //update Profile\n            .addCase(updateProfile.pending, (state) => {\n                state.loading = true;\n                state.error = null;\n            })\n            .addCase(updateProfile.fulfilled, (state, action) => {\n                state.loading = false;\n                state.userInfo = action.payload;\n            })\n            .addCase(updateProfile.rejected, (state, action) => {\n                state.loading = false;\n                state.error = action.payload;\n            });\n    },\n});\n\nexport const { logoutUser } = userSlice.actions;\nexport default userSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}